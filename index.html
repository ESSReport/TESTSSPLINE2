<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shop Balance Dashboard</title>

  <!-- ‚úÖ PIN check runs before any DOM is built -->
  <script>
    (function(){
      const encoded = "MTEwMTIwMjU="; // "11012025"
      const entered = prompt("üîê Enter PIN to access dashboard:");
      if (!entered || btoa(entered) !== encoded) {
        document.write(`
          <style>
            body{
              display:flex;
              justify-content:center;
              align-items:center;
              height:100vh;
              background:#fff3f3;
              color:#c00;
              font-family:Arial,sans-serif;
              text-align:center;
            }
          </style>
          <body><h2>‚ùå Access Denied<br>Invalid PIN</h2></body>
        `);
        document.close();
        window.stop();
      }
    })();
  </script>

  <style>
    body { font-family:"Segoe UI",sans-serif; background:#f6f8fa; padding:20px; }
    h1 { text-align:center; margin-bottom:20px; }
    table { border-collapse:collapse; width:100%; background:#fff; }
    th,td { border:1px solid #ccc; padding:8px; text-align:center; }
    th { background:#0077cc; color:#fff; }
    tr:nth-child(even){ background:#f2f2f2; }
    button { background:#0077cc; color:#fff; border:none; padding:8px 12px; border-radius:5px; cursor:pointer; }
    button:hover { background:#005fa3; }
    .controls { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:15px; }
    #totalsRow { display:flex; flex-wrap:wrap; gap:8px; margin-top:15px; }
    .total-card { background:#fff; padding:10px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); flex:1 1 150px; text-align:center; }
  </style>
</head>

<body>
  <h1>üìä Shop Balance Dashboard</h1>

  <div class="controls">
    <select id="leaderFilter"></select>
    <select id="groupFilter"></select>
    <input id="searchInput" type="text" placeholder="Search Shop..." />
    <button id="exportBtn">‚¨áÔ∏è Export CSV</button>
    <button id="downloadAllShopsBtn">üóÇ Download All Summaries (ZIP)</button>
  </div>

  <div id="teamDashboardLink"></div>

  <table>
    <thead><tr id="tableHeader"></tr></thead>
    <tbody id="tableBody"></tbody>
  </table>

  <div style="display:flex;justify-content:center;align-items:center;gap:10px;margin-top:10px;">
    <button id="prevPage">‚óÄ Prev</button>
    <span id="pageInfo">Page 1</span>
    <button id="nextPage">Next ‚ñ∂</button>
  </div>

  <div id="totalsRow"></div>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
